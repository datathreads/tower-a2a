# Agent2Agent (A2A) Protocol Specification v0.3.0 - Type Definitions

## 1. Discovery Objects

### AgentCard
The root discovery document, typically served at `/.well-known/agent.json`.
- `protocolVersion`: (string) A2A protocol version (default: `"0.3.0"`).
- `name`: (string) Human-readable agent name.
- `description`: (string) Agent's purpose and functionality.
- `url`: (string) Primary endpoint URL for interaction.
- `preferredTransport`: ([TransportProtocol](#transportprotocol) | string, optional) Transport at main URL; defaults to `"JSONRPC"`.
- `additionalInterfaces`: (Array of [AgentInterface](#agentinterface), optional) Alternative transport/URL combinations.
- `iconUrl`: (string, optional) Icon resource location.
- `provider`: ([AgentProvider](#agentprovider), optional) Service provider information.
- `version`: (string) Agent's own version number.
- `documentationUrl`: (string, optional) Reference documentation link.
- `capabilities`: ([AgentCapabilities](#agentcapabilities)) Protocol features supported.
- `securitySchemes`: (Map\<string, [SecurityScheme](#securityscheme)\>, optional) Authentication method declarations.
- `security`: (Array of object, optional) "OR of ANDs" security requirements. Each element is `{ [schemeName]: string[] }`.
- `defaultInputModes`: (string[]) Supported input MIME types.
- `defaultOutputModes`: (string[]) Supported output MIME types.
- `skills`: (Array of [AgentSkill](#agentskill)) Distinct capabilities offered.
- `supportsAuthenticatedExtendedCard`: (boolean, optional) Extended card availability (default: `false`).
- `signatures`: (Array of [AgentCardSignature](#agentcardsignature), optional) JWS signatures for verification.

### AgentProvider
- `organization`: (string) Organization name.
- `url`: (string) Provider website or documentation URL.

### AgentCapabilities
- `streaming`: (boolean, optional) SSE streaming support.
- `pushNotifications`: (boolean, optional) Asynchronous notification delivery.
- `stateTransitionHistory`: (boolean, optional) Task state change history availability.
- `extensions`: (Array of [AgentExtension](#agentextension), optional) Protocol extensions supported.

### AgentExtension
- `uri`: (string) Unique extension identifier.
- `description`: (string, optional) Extension usage explanation.
- `required`: (boolean, optional) Whether client compliance is required.
- `params`: (object, optional) Extension-specific configuration.

### AgentSkill
- `id`: (string) Unique skill identifier.
- `name`: (string) Human-readable skill label.
- `description`: (string) Capability details and behaviors.
- `tags`: (string[]) Categorical keywords.
- `examples`: (string[], optional) Usage scenario demonstrations.
- `inputModes`: (string[], optional) Supported input MIME types (overrides AgentCard defaults).
- `outputModes`: (string[], optional) Supported output MIME types (overrides AgentCard defaults).
- `security`: (Array of object, optional) Skill-specific security requirements (same format as AgentCard `security`).

### AgentInterface
- `url`: (string) Interface endpoint location.
- `transport`: ([TransportProtocol](#transportprotocol) | string) Protocol available at URL.

### AgentCardSignature
JWS signature per RFC 7515.
- `protected`: (string) Base64url-encoded JSON object.
- `signature`: (string) Computed signature, Base64url-encoded.
- `header`: (object, optional) Unprotected JWS header values.

### TransportProtocol
Enum of supported transport protocols:
- `JSONRPC` - JSON-RPC 2.0 over HTTP.
- `GRPC` - gRPC over HTTP/2.
- `HTTP+JSON` - REST-style HTTP with JSON.

---

## 2. Core Protocol Objects

### Task
The core unit of stateful execution.
- `id`: (string) Unique task identifier (UUID).
- `contextId`: (string) Server-generated context grouping identifier.
- `status`: ([TaskStatus](#taskstatus)) Current state and descriptive context.
- `history`: (Array of [Message](#message), optional) Conversation message exchange record.
- `artifacts`: (Array of [Artifact](#artifact), optional) Agent-generated output collection.
- `metadata`: (object, optional) Extension-specific key-value data.
- `kind`: (string) Fixed value `"task"`.

### TaskStatus
- `state`: ([TaskState](#taskstate)) Current lifecycle position.
- `message`: ([Message](#message), optional) Status explanation or context.
- `timestamp`: (string, optional) ISO-8601 datetime.

### TaskState
Enum of task lifecycle states:
- `queued` - Awaiting processing initiation.
- `in-progress` - Currently executing.
- `input-required` - Awaiting additional user/client information.
- `auth-required` - Secondary authentication credentials needed.
- `completed` - Successfully finished.
- `canceled` - Terminated by client request.
- `rejected` - Declined due to validation failure.
- `failed` - Execution error encountered.

### Message
- `role`: (string) `"user"` or `"agent"`.
- `parts`: (Array of [Part](#part)) Content components.

### Part (Union Type)
Discriminated by `kind` field. All parts may include optional `metadata` (object).
- **TextPart**: `{ "kind": "text", "text": string }`
- **FilePart**: `{ "kind": "file", "file": FileWithBytes | FileWithUri }`
- **DataPart**: `{ "kind": "data", "data": any }` (structured JSON)

### FileWithBytes
- `mimeType`: (string) File content type.
- `name`: (string) File identifier.
- `bytes`: (Uint8Array) Raw file content.

### FileWithUri
- `mimeType`: (string) File content type.
- `name`: (string) File identifier.
- `uri`: (string) File reference URL.

### Artifact
- `id`: (string) Unique artifact identifier.
- `title`: (string, optional) Display name.
- `description`: (string, optional) Purpose explanation.
- `parts`: (Array of [Part](#part)) Composed content units.
- `metadata`: (object, optional) Extension-specific attributes.

---

## 3. Communication & RPC Types

### JSONRPCRequest
- `jsonrpc`: (string) Must be `"2.0"`.
- `method`: (string) RPC method name, e.g., `"message/send"`.
- `params`: (object, optional) Method-specific payload.
- `id`: (string | number) Request identifier (required if response expected).

### JSONRPCResponse
- `jsonrpc`: (string) Must be `"2.0"`.
- `result`: (any, conditional) Method result (if successful).
- `error`: ([JSONRPCError](#jsonrpcerror), conditional) Error details (if failed).
- `id`: (string | number) Corresponding request identifier.

### JSONRPCError
- `code`: (number) Error classification code.
- `message`: (string) Error description.
- `data`: (any, optional) Additional error context.

### MessageSendParams
- `message`: ([Message](#message)) Communication content.
- `skillId`: (string, optional) Target skill identifier.
- `taskId`: (string, optional) Existing task reference.
- `configuration`: ([MessageSendConfiguration](#messagesendconfiguration), optional) Execution settings.

### MessageSendConfiguration
- `clientToolUseId`: (string, optional) Client-side tool invocation tracking.
- `timeout`: (number, optional) Execution duration limit (milliseconds).
- `priority`: (string, optional) Processing priority: `"low"`, `"normal"`, or `"high"`.

### TaskQueryParams
- `id`: (string) Task identifier to retrieve.

### TaskIdParams
- `id`: (string) Task identifier reference.

---

## 4. Streaming Types

### SendStreamingMessageResponse
JSON-RPC envelope for streaming events.
- `jsonrpc`: (string) Must be `"2.0"`.
- `result`: ([TaskStatusUpdateEvent](#taskstatusupdateevent) | [TaskArtifactUpdateEvent](#taskartifactupdateevent), conditional) Streaming event (if successful).
- `error`: ([JSONRPCError](#jsonrpcerror), conditional) Error details (if failed).
- `id`: (string | number) Request identifier.

### TaskStatusUpdateEvent
- `kind`: (string) Fixed value `"taskStatusUpdate"`.
- `taskId`: (string) Related task identifier.
- `taskStatus`: ([TaskStatus](#taskstatus)) Updated state information.

### TaskArtifactUpdateEvent
- `kind`: (string) Fixed value `"taskArtifactUpdate"`.
- `taskId`: (string) Related task identifier.
- `artifact`: ([Artifact](#artifact)) Generated output artifact.

---

## 5. Push Notification Types

### PushNotificationConfig
- `url`: (string) Webhook endpoint for notifications.
- `authenticationInfo`: ([PushNotificationAuthenticationInfo](#pushnotificationauthenticationinfo), optional) Authentication credentials for webhook.

### PushNotificationAuthenticationInfo
- `type`: (string) Authentication scheme (`"Bearer"`, `"Basic"`, `"ApiKey"`).
- `token`: (string, optional) OAuth/Bearer token value.
- `apiKey`: (string, optional) API key value.
- `username`: (string, optional) Basic auth username.
- `password`: (string, optional) Basic auth password.
- `headers`: (Map\<string, string\>, optional) Custom HTTP headers.

### TaskPushNotificationConfig
- `id`: (string) Configuration identifier.
- `taskId`: (string) Associated task reference.
- `config`: ([PushNotificationConfig](#pushnotificationconfig)) Notification delivery settings.

### GetTaskPushNotificationConfigParams
- `taskId`: (string) Associated task identifier.
- `configId`: (string) Configuration identifier.

### ListTaskPushNotificationConfigParams
- `taskId`: (string) Associated task identifier.

### DeleteTaskPushNotificationConfigParams
- `taskId`: (string) Associated task identifier.
- `configId`: (string) Configuration identifier.

---

## 6. Security Schemes

### SecurityScheme (Discriminated Union)
Discriminated by `type` field. Maps to OpenAPI 3.0 Security Scheme Object patterns.
- **APIKeySecurityScheme**: `{ "type": "apiKey", "name": string, "in": "header" | "query" }`
- **HTTPAuthSecurityScheme**: `{ "type": "http", "scheme": "basic" | "bearer" }`
- **OAuth2SecurityScheme**: `{ "type": "oauth2", "flows": object }`
- **OpenIdConnectSecurityScheme**: `{ "type": "openIdConnect", "openIdConnectUrl": string }`
- **MutualTLSSecurityScheme**: `{ "type": "mutualTLS" }`
